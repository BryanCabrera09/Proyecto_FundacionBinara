<div class="project-details">
    <h1 class="titulo">{{ proyecto.titulo }}</h1>
    <h5 *ngIf="proyecto.mapas && proyecto.mapas.length > 0" class="subtitulo">{{ getProvincia(proyecto.mapas[0].lugar)}}
    </h5>
    <div class="details-grid">
        <div class="image-container">
            <img [src]="proyecto.portada" alt="Imagen del proyecto">
        </div>
        <div class="details-column">
            <h3 class="titulodetalle">Detalles del Proyecto</h3>
            <div class="distanciaDetalle">
                <p><strong>Fecha Inicio:</strong> {{ proyecto.fechaInicio | date:'dd' }} de {{ proyecto.fechaInicio |
                    date:'MMMM' }} del {{ proyecto.fechaInicio | date:'y' }}</p>
                <p><strong>Fecha Fin:</strong> {{ proyecto.fechaFin | date:'dd' }} de {{ proyecto.fechaFin | date:'MMMM'
                    }} del {{ proyecto.fechaFin | date:'y' }}</p>

                <p><i class="fas fa-dollar-sign"></i><span> Presupuesto:</span> {{ proyecto.presupuesto }}</p>
                <p><i class="fas fa-hand-holding-usd"></i><span> Recolectado:</span> {{ proyecto.recolectado }}</p>
            </div>
        </div>
    </div>
    <div class="text-container">
        <p><strong>Objetivo principal:</strong> {{ proyecto.objetivoPrincipal }}</p>
        <p><strong>Objetivos Secundarios:</strong></p>
        <ul>
            <li *ngFor="let objetivo of proyecto.objetivosSecundarios">{{ objetivo }}</li>
        </ul>
        <p>{{ proyecto.parrafoUno }}</p>
        <p>{{ proyecto.parrafoDos }}</p>
        <p>{{ proyecto.parrafoTres }}</p>
    </div>

    <div class="text-container">
        <h4 class="section-header">Actividades</h4>
        <div *ngFor="let actividad of actividades" class="activity-card">
            <h5 (click)="toggleDetalle(actividad._id!)" class="activity-title">
                <span class="toggle-icon" [ngClass]="{'expanded': detallesVisibles.has(actividad._id!)}"> + </span>
                {{ actividad.titulo }}
            </h5>
            <div *ngIf="detallesVisibles.has(actividad._id!)" class="activity-details">
                <p><strong><i class="fas fa-align-left"></i> Descripci√≥n:</strong> {{ actividad.descripcion }}</p>
                <p><strong><i class="fas fa-layer-group"></i> N√∫mero de √Åreas:</strong> {{ actividad.num_areas }}</p>
                <p><strong><i class="fas fa-hands-helping"></i> N√∫mero de Personas Beneficiarias:</strong> {{
                    actividad.num_personas_beneficiarias }}</p>
                <p><strong><i class="fas fa-female"></i> N√∫mero de Mujeres Beneficiarias:</strong> {{
                    actividad.num_mujeres_beneficiarias}}</p>
                <p><strong><i class="fas fa-baby"></i> N√∫mero de Ni√±os y Ni√±as Beneficiarias:</strong> {{
                    actividad['num_ni√±os_ni√±as_beneficiarias'] }}</p>
                <p><strong><i class="fas fa-user-graduate"></i>N√∫mero de Adolescentes Beneficiarios:</strong> {{
                    actividad.num_adoloscentes_beneficiarios}}</p>
                <p><strong><i class="fas fa-user-tie"></i> N√∫mero de Adultos Beneficiarios:</strong> {{
                    actividad.num_adultos_beneficiarios}}</p>
                <div class="action-buttons">
                    <button class="edit-button" title="Editar" (click)="editarproyecto(actividad)">
                        ‚úé
                    </button>
                    <button class="delete-button" title="Eliminar" (click)="confirmDeleteProject(actividad)">
                        <span *ngIf="actividad.visible">üóë</span>
                        <span *ngIf="!actividad.visible">‚úì</span>
                    </button>
                    <div *ngIf="isConfirmVisible" class="custom-confirm">
                        <div class="confirm-content">
                            <p>{{ confirmMessage }}</p>
                            <button (click)="confirm()">Confirmar</button>
                            <button (click)="cancel()">Cancelar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="button-container">
        <button class="add-project-button" (click)="proyecto.uid && abrirRegistrodeactividad(proyecto.uid)">A√±adir
            Actividad</button>
    </div>
    <br>
    <div class="map-section">
        <h4 class="map-label text-container">UBICACI√ìN</h4>

        <div class="map-wrapper">
            <div #mapContainer class="map-container"></div>
            <div class="coordinates-display"> {{ lat }} , {{ lng }}</div>
        </div>
        <div class="location-info mapa text-container">
            <div>
                Provincia: <input type="text" [value]="provincia" readonly>
            </div>
            <div>
                Cant√≥n: <input type="text" [value]="canton" readonly>
            </div>
            <div>
                Parroquia: <input type="text" [value]="parroquia" readonly>
            </div>
        </div>
    </div>
</div>